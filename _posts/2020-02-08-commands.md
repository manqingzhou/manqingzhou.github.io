---
layout: post
title: Network Automation using Python
subtitle: Paramiko
---
~~~
#!/usr/bin/env python
import time
import paramiko

def send_cmd(conn,command):
    conn.send(command + "\n")
    time.sleep(1,0)
    
def get_output(conn):
    return conn.recv(65535).decode("utf-8")

def main():
    host_dict = {"R1": "show running-config | section vrf_definition",
                 "R2": "show running-config vrf",}
    for hostname, vrf_cmd in host_dict.items();
        conn_params = paramiko.SSHClient()
        conn_params.set_missing_host_key_policy(paramiko.AutoAddPolicy)
        conn_params.connect(
        hostname = hostname, port22=22, username="pyuser",password="pypass",look_for_keys=False, allow_agent=False,)
    conn = conn_params.invoke_shell()
    time_sleep(1,0)
    print(f"Logged into {get_output(conn).strip()} successfully")

